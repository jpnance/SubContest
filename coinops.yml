slug: subcontest
domain: subcontest.coinflipper.org
port: 7811
type: node

# For auto-deploy (omit to skip auto-deploy)
deploy_cmd: "docker compose run --rm --no-deps web npm ci && docker compose down && docker compose up -d"

# For up.sh â€” bring containers up if they're down (omit if nothing to bring up)
up_cmd: "docker compose up -d"

# For backups (omit to skip backups)
backup_cmd: "docker exec subcontest-mongo mongodump --archive --gzip > ~/backups/subcontest/subcontest.gz"

# For metadata generation (used with monotonic alerting)
mongo_container: subcontest-mongo

# Mongo-specific: collections that should never shrink (for alerting)
# Only relevant if backup_cmd does a mongodump
monotonic:
  - games
  - users
